services:
    db:
        image: mongo:latest
        restart: always
        environment:
            MONGO_INITDB_ROOT_USERNAME: root
            MONGO_INITDB_ROOT_PASSWORD: example
        ports:
            - '27017:27017'
        volumes:
            - ./mongodb:/data/db
        hostname: mongodb
        networks:
            - app
    webapp:
        stdin_open: true
        build: 
            context: "webapp"
            dockerfile: Dockerfile
        volumes:
            - /app/node_modules
            - /app/.next
            - ./webapp/:/app
        ports:
            - 3000:3000
        environment:
            - WATCHPACK_POLLING=true
        restart: always
        networks:
            - app
networks:
    app:
        driver: bridge